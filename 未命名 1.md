erDiagram

    %% 用户模型
    User ||--o{ BookList : has
    User }o--o{ Group : belongs_to
    User }o--o{ Permission : has

    %% 书单与书
    BookList }o--o{ Book : includes

    %% 书籍相关
    Book }o--|| Publisher : published_by
    Book }o--o{ Author : written_by
    Book }o--o{ Tag : categorized_as

    %% 爬虫标签
    CrawlingTag ||--|| Tag : based_on

    %% 实体定义
    User {
        string username
        string phone
        string email
        text bio
    }

    BookList {
        datetime created_at
        datetime updated_at
    }

    Book {
        int book_id
        string douban_id
        string title
        string subtitle
        string producer
        string publish_year
        int pages
        decimal price
        string binding
        string series
        string isbn
        string cover_url
        float douban_score
        int review_count
        string user_rating
        string read_status
        datetime created_at
        datetime updated_at
    }

    Publisher {
        int publisher_id
        string publisher
    }

    Author {
        string author
    }

    Tag {
        string tag
    }

    CrawlingTag {
        string tag
        datetime last_crawled
        string status
    }

    Group {
        string name
    }

    Permission {
        string codename
    }
